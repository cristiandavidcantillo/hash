<?php
$max_salida = 10; // Previene algun posible ciclo infinito limitando a 10 los ../
$ruta_raiz = $ruta = "";
while ($max_salida > 0) {
  if (@is_file($ruta . "define.php")) {
    $ruta_raiz = $ruta; //Preserva la ruta superior encontrada
    break;
  }
  $ruta .= "../";
  $max_salida--;
}

include_once($ruta_raiz . 'define.php');
include_once($ruta_raiz . 'clases.php');
include_once($ruta_raiz . 'funciones_generales.php');


$body = file_get_contents('php://input');

if (!empty($body)) {
  $data = json_decode($body, true);
  $nomClase = new $data['class']();

  $dato = call_user_func(array($nomClase, $data['method']), @$data['param']);
  echo json_encode($dato);
}

class RecuperarPass{

    public $dbD;    //conectar y desconectar, es como un let

    function __construct(){   //cuando se instancie un objeto de rcuperar pass, las variables se le asigbnan valores
      $this->currentDate = fecha_db_insertar(date('Y-m-d H:i:s'), 'Y-m-d H:i:s');
      $sesion = new Session();
      $this->userLogin = $sesion->get('user');
    }



/* Private functions for conection to DBs */
private function openSessionDynamics(){
    $this->dbD = new Bd();
    $this->dbD->conectar();
  }

  private function closeSessionDynamics(){
    $this->dbD->desconectar();
  }


}